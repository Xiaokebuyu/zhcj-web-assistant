# OpenManusé›†æˆæ–‡æ¡£

## æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†æ‚¬æµ®æ¡†åŠ©æ‰‹ä¸OpenManus AIä»£ç†çš„é›†æˆå®ç°ã€‚é€šè¿‡è¿™ä¸ªé›†æˆï¼Œæ‚¬æµ®æ¡†åŠ©æ‰‹è·å¾—äº†å¼ºå¤§çš„ä»»åŠ¡å¤„ç†èƒ½åŠ›ï¼ŒåŒ…æ‹¬ç½‘é¡µè‡ªåŠ¨åŒ–ã€ä»£ç æ‰§è¡Œã€æ–‡ä»¶æ“ä½œç­‰é«˜çº§åŠŸèƒ½ã€‚

## ğŸ¯ é›†æˆç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **æ™ºèƒ½å·¥å…·è°ƒåº¦**: DeepSeekä½œä¸ºä¸»å¯¹è¯å¼•æ“ï¼Œè‡ªåŠ¨åˆ¤æ–­ä½•æ—¶éœ€è¦OpenManus
- **æ— ç¼ç”¨æˆ·ä½“éªŒ**: ç”¨æˆ·æ— éœ€æ‰‹åŠ¨åˆ‡æ¢æ¨¡å¼ï¼Œè‡ªç„¶å¯¹è¯å³å¯è§¦å‘OpenManus
- **ä»»åŠ¡è¿›åº¦å¯è§†åŒ–**: å®æ—¶æ˜¾ç¤ºOpenManusä»»åŠ¡æ‰§è¡Œè¿›åº¦
- **é”™è¯¯å¤„ç†å’Œé‡è¯•**: å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶
- **ç»Ÿä¸€ç•Œé¢**: åœ¨åŒä¸€ä¸ªç•Œé¢ä¸­ä½¿ç”¨ä¸¤å¥—AIèƒ½åŠ›

### OpenManuså·¥å…·é›†
1. **ç½‘é¡µè‡ªåŠ¨åŒ–** (`openmanus_web_automation`)
   - ç½‘é¡µæ•°æ®æŠ“å–
   - è¡¨å•è‡ªåŠ¨å¡«å†™
   - é¡µé¢å…ƒç´ äº¤äº’
   - æ‰¹é‡ç½‘é¡µæ“ä½œ

2. **ä»£ç æ‰§è¡Œ** (`openmanus_code_execution`)
   - Pythonä»£ç è¿è¡Œ
   - æ•°æ®åˆ†æå’Œå¯è§†åŒ–
   - ç®—æ³•å®ç°
   - è®¡ç®—ä»»åŠ¡

3. **æ–‡ä»¶æ“ä½œ** (`openmanus_file_operations`)
   - æ–‡ä»¶è¯»å†™ç¼–è¾‘
   - æ ¼å¼è½¬æ¢
   - æ‰¹é‡æ–‡ä»¶å¤„ç†
   - ç›®å½•æ“ä½œ

4. **é€šç”¨ä»»åŠ¡** (`openmanus_general_task`)
   - å¤æ‚å¤šæ­¥éª¤ä»»åŠ¡
   - æ™ºèƒ½ä»»åŠ¡è§„åˆ’
   - è‡ªåŠ¨åŒ–æµç¨‹æ‰§è¡Œ

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
ç”¨æˆ·è¾“å…¥ â†’ DeepSeekåˆ†æ â†’ å·¥å…·é€‰æ‹©å†³ç­–
â”œâ”€â”€ ç®€å•å¯¹è¯ â†’ DeepSeekç›´æ¥å›å¤
â”œâ”€â”€ åŸºç¡€å·¥å…· â†’ å¤©æ°”/æœç´¢å·¥å…·
â””â”€â”€ å¤æ‚ä»»åŠ¡ â†’ OpenManusä»£ç†å¤„ç† â†’ ç»“æœæ•´åˆ â†’ ç”¨æˆ·å›å¤
```

### æŠ€æœ¯æ¶æ„
```
æ‚¬æµ®æ¡†åŠ©æ‰‹ (Next.js)
â”œâ”€â”€ Chat API (/api/chat) - ä¸»å¯¹è¯å¼•æ“
â”œâ”€â”€ Tools API (/api/tools) - å·¥å…·æ‰§è¡Œ
â”œâ”€â”€ OpenManus API (/api/openmanus) - OpenManusé›†æˆ
â””â”€â”€ OpenManus API Service (Python FastAPI) - HTTPåŒ…è£…å™¨
    â””â”€â”€ OpenManus Core (Python) - æ ¸å¿ƒä»£ç†
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
ai-assistant/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/api/
â”‚   â”‚   â”œâ”€â”€ chat/route.ts          # ä¸»èŠå¤©APIï¼ˆå·²å¢å¼ºï¼‰
â”‚   â”‚   â”œâ”€â”€ tools/route.ts         # å·¥å…·æ‰§è¡ŒAPI
â”‚   â”‚   â””â”€â”€ openmanus/route.ts     # OpenManusé›†æˆAPI
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ FloatingAssistant.tsx  # ä¸»ç»„ä»¶ï¼ˆå·²å¢å¼ºï¼‰
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ toolManager.ts         # å·¥å…·ç®¡ç†å™¨ï¼ˆå·²æ‰©å±•ï¼‰
â”‚   â””â”€â”€ types/
â”‚       â””â”€â”€ index.ts               # ç±»å‹å®šä¹‰ï¼ˆå·²æ‰©å±•ï¼‰
â”œâ”€â”€ openmanus-api-service/
â”‚   â”œâ”€â”€ main.py                    # OpenManus HTTP APIæœåŠ¡
â”‚   â””â”€â”€ requirements.txt           # Pythonä¾èµ–
â”œâ”€â”€ OpenManus/                     # OpenManusæºä»£ç 
â”œâ”€â”€ start-with-openmanus.sh        # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ stop-services.sh               # åœæ­¢è„šæœ¬
â””â”€â”€ test-openmanus-integration.js  # é›†æˆæµ‹è¯•
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd ai-assistant/

# å®‰è£…Node.jsä¾èµ–
npm install

# è®¾ç½®ç¯å¢ƒå˜é‡
export DEEPSEEK_API_KEY="your_deepseek_key"
export QWEATHER_API_KEY="your_qweather_key"
export BOCHA_API_KEY="your_bocha_key"
```

### 2. å¯åŠ¨æœåŠ¡

```bash
# ä½¿ç”¨é›†æˆå¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
./start-with-openmanus.sh

# æˆ–è€…æ‰‹åŠ¨å¯åŠ¨
# 1. å¯åŠ¨OpenManus APIæœåŠ¡
cd openmanus-api-service
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
python main.py &

# 2. å¯åŠ¨Next.jsåº”ç”¨
cd ..
npm run dev
```

### 3. æµ‹è¯•é›†æˆ

```bash
# è¿è¡Œé›†æˆæµ‹è¯•
node test-openmanus-integration.js

# æˆ–åœ¨æµè§ˆå™¨ä¸­è®¿é—®
# http://localhost:3000
```

## ğŸ”§ ä½¿ç”¨æ–¹å¼

### è§¦å‘OpenManuså·¥å…·çš„å…³é”®è¯

**ç½‘é¡µè‡ªåŠ¨åŒ–**:
- "å¸®æˆ‘çˆ¬å–/æŠ“å–è¿™ä¸ªç½‘é¡µ"
- "è‡ªåŠ¨å¡«å†™è¿™ä¸ªè¡¨å•"  
- "æ‰¹é‡ä¸‹è½½ç½‘é¡µå†…å®¹"
- "ç½‘é¡µæ•°æ®æå–"

**ä»£ç æ‰§è¡Œ**:
- "å¸®æˆ‘å†™ä¸€æ®µPythonä»£ç "
- "æ•°æ®åˆ†æ/å¤„ç†"
- "ç”Ÿæˆå›¾è¡¨/å¯è§†åŒ–"
- "ç®—æ³•å®ç°"

**æ–‡ä»¶æ“ä½œ**:
- "ç¼–è¾‘/ä¿®æ”¹æ–‡ä»¶"
- "è½¬æ¢æ–‡ä»¶æ ¼å¼"
- "æ‰¹é‡å¤„ç†æ–‡ä»¶"
- "æ–‡ä»¶æ“ä½œ"

**å¤æ‚ä»»åŠ¡**:
- "å¸®æˆ‘å®Œæˆä¸€ä¸ªå¤æ‚çš„ä»»åŠ¡"
- "è‡ªåŠ¨åŒ–æµç¨‹"
- "å¤šæ­¥éª¤æ“ä½œ"

### ç¤ºä¾‹å¯¹è¯

```
ç”¨æˆ·: "å¸®æˆ‘æŠ“å–è¿™ä¸ªç½‘é¡µçš„äº§å“ä¿¡æ¯: https://example.com"
åŠ©æ‰‹: [è‡ªåŠ¨è°ƒç”¨openmanus_web_automationå·¥å…·]
     "æˆ‘å·²ç»ä¸ºæ‚¨æŠ“å–äº†è¯¥ç½‘é¡µçš„äº§å“ä¿¡æ¯ï¼Œå…±æ‰¾åˆ°15ä¸ªäº§å“..."

ç”¨æˆ·: "åˆ†æä¸€ä¸‹è¿™ä¸ªCSVæ–‡ä»¶çš„é”€å”®è¶‹åŠ¿"
åŠ©æ‰‹: [è‡ªåŠ¨è°ƒç”¨openmanus_code_executionå·¥å…·]
     "æ ¹æ®æ•°æ®åˆ†æï¼Œé”€å”®è¶‹åŠ¿æ˜¾ç¤º..."

ç”¨æˆ·: "ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"
åŠ©æ‰‹: [è°ƒç”¨å¸¸è§„å¤©æ°”å·¥å…·]
     "ä»Šå¤©åŒ—äº¬å¤©æ°”æ™´æœ—ï¼Œæ°”æ¸©22Â°C..."
```

## âš™ï¸ é…ç½®é€‰é¡¹

### OpenManus APIæœåŠ¡é…ç½®

`openmanus-api-service/main.py`:
```python
# æœåŠ¡é…ç½®
OPENMANUS_API_URL = 'http://127.0.0.1:8001'
WORKSPACE_DIR = OPENMANUS_DIR / "workspace"

# CORSè®¾ç½®
allow_origins=["http://localhost:3000", "https://localhost:3000"]
```

### å‰ç«¯é…ç½®

`src/utils/toolManager.ts`:
```typescript
private static readonly OPENMANUS_API_URL = 'http://127.0.0.1:8001';
```

## ğŸ” APIæ¥å£æ–‡æ¡£

### OpenManus APIæœåŠ¡

#### æ‰§è¡Œä»»åŠ¡
```http
POST /api/execute_task
Content-Type: application/json

{
  "task_description": "ä»»åŠ¡æè¿°",
  "agent_type": "manus",
  "max_steps": 20
}
```

#### æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€
```http
GET /api/task_status/{task_id}
```

#### è·å–å¯ç”¨å·¥å…·
```http
GET /api/available_tools
```

#### å¥åº·æ£€æŸ¥
```http
GET /api/health
```

### æ‚¬æµ®æ¡†åŠ©æ‰‹API

#### OpenManusé›†æˆAPI
```http
POST /api/openmanus
Content-Type: application/json

{
  "action": "execute_task",
  "task_description": "ä»»åŠ¡æè¿°"
}
```

#### èŠå¤©APIï¼ˆå·²å¢å¼ºï¼‰
```http
POST /api/chat
Content-Type: application/json

{
  "messages": [...],
  "tools": [...] // åŒ…å«OpenManuså·¥å…·å®šä¹‰
}
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **OpenManus APIæœåŠ¡æ— æ³•å¯åŠ¨**
   ```bash
   # æ£€æŸ¥Pythonç¯å¢ƒ
   which python3
   
   # æ£€æŸ¥ä¾èµ–å®‰è£…
   pip list
   
   # æŸ¥çœ‹æ—¥å¿—
   tail -f logs/openmanus-api.log
   ```

2. **å·¥å…·è°ƒç”¨å¤±è´¥**
   ```bash
   # æ£€æŸ¥APIè¿æ¥
   curl http://localhost:8001/api/health
   
   # æ£€æŸ¥ç«¯å£å ç”¨
   lsof -i :8001
   ```

3. **OpenManusä»»åŠ¡æ‰§è¡Œè¶…æ—¶**
   - é»˜è®¤è¶…æ—¶æ—¶é—´ä¸º5åˆ†é’Ÿ
   - å¯ä»¥åœ¨`toolManager.ts`ä¸­è°ƒæ•´è¶…æ—¶è®¾ç½®
   - æ£€æŸ¥ä»»åŠ¡å¤æ‚åº¦ï¼Œè€ƒè™‘åˆ†è§£ä»»åŠ¡

### è°ƒè¯•æ¨¡å¼

```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
export DEBUG=true

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f logs/openmanus-api.log

# ä½¿ç”¨æµ‹è¯•è„šæœ¬
node test-openmanus-integration.js
```

## ğŸ”’ å®‰å…¨è€ƒè™‘

1. **APIè®¿é—®æ§åˆ¶**
   - OpenManus APIä»…ç»‘å®šæœ¬åœ°åœ°å€
   - CORSé…ç½®é™åˆ¶è®¿é—®æ¥æº
   - ä»»åŠ¡æ‰§è¡Œåœ¨æ²™ç›’ç¯å¢ƒä¸­

2. **è¾“å…¥éªŒè¯**
   - æ‰€æœ‰ç”¨æˆ·è¾“å…¥éƒ½ç»è¿‡éªŒè¯
   - ä»»åŠ¡æè¿°é•¿åº¦é™åˆ¶
   - æ¶æ„ä»£ç è¿‡æ»¤

3. **èµ„æºç®¡ç†**
   - ä»»åŠ¡æ‰§è¡Œæ—¶é—´é™åˆ¶
   - å†…å­˜ä½¿ç”¨ç›‘æ§
   - è¿›ç¨‹éš”ç¦»

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å»ºè®®é…ç½®
- **ä»»åŠ¡å¹¶è¡Œ**: OpenManuså’Œå¸¸è§„å·¥å…·å¯å¹¶è¡Œæ‰§è¡Œ
- **è¿æ¥æ± **: å¤ç”¨OpenManuså®ä¾‹å‡å°‘åˆå§‹åŒ–å¼€é”€
- **ç¼“å­˜æœºåˆ¶**: ç¼“å­˜å¸¸ç”¨ä»»åŠ¡ç»“æœ
- **å¼‚æ­¥å¤„ç†**: é•¿æ—¶é—´ä»»åŠ¡ä½¿ç”¨å¼‚æ­¥å¤„ç†

### ç›‘æ§æŒ‡æ ‡
- APIå“åº”æ—¶é—´
- ä»»åŠ¡æˆåŠŸç‡
- èµ„æºä½¿ç”¨æƒ…å†µ
- é”™è¯¯é¢‘ç‡

## ğŸ‰ åŠŸèƒ½æ¼”ç¤º

### ç¤ºä¾‹åœºæ™¯

1. **æ•°æ®æŠ“å–å’Œåˆ†æ**
   ```
   ç”¨æˆ·: "å¸®æˆ‘æŠ“å–è¿™ä¸ªç”µå•†ç½‘ç«™çš„äº§å“ä»·æ ¼ï¼Œç„¶ååˆ†æä»·æ ¼è¶‹åŠ¿"
   æµç¨‹: ç½‘é¡µæŠ“å– â†’ æ•°æ®æ¸…æ´— â†’ è¶‹åŠ¿åˆ†æ â†’ å›¾è¡¨ç”Ÿæˆ
   ```

2. **è‡ªåŠ¨åŒ–æŠ¥å‘Šç”Ÿæˆ**
   ```
   ç”¨æˆ·: "æ ¹æ®è¿™äº›CSVæ–‡ä»¶ç”Ÿæˆæœˆåº¦é”€å”®æŠ¥å‘Š"
   æµç¨‹: æ–‡ä»¶è¯»å– â†’ æ•°æ®åˆ†æ â†’ æŠ¥å‘Šç”Ÿæˆ â†’ æ ¼å¼è½¬æ¢
   ```

3. **æ‰¹é‡æ–‡ä»¶å¤„ç†**
   ```
   ç”¨æˆ·: "å°†è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰å›¾ç‰‡è½¬æ¢ä¸ºPDF"
   æµç¨‹: æ–‡ä»¶æ‰«æ â†’ æ ¼å¼è½¬æ¢ â†’ æ‰¹é‡å¤„ç† â†’ ç»“æœæ•´åˆ
   ```

## ğŸ”® æœªæ¥è®¡åˆ’

### çŸ­æœŸè®¡åˆ’
- [ ] æ·»åŠ æ›´å¤šOpenManusä»£ç†ç±»å‹æ”¯æŒ
- [ ] å®ç°ä»»åŠ¡é˜Ÿåˆ—å’Œæ‰¹å¤„ç†
- [ ] å¢å¼ºé”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- [ ] æ·»åŠ ä»»åŠ¡å†å²è®°å½•

### é•¿æœŸè®¡åˆ’
- [ ] æ”¯æŒè‡ªå®šä¹‰å·¥å…·æ‰©å±•
- [ ] å®ç°åˆ†å¸ƒå¼ä»»åŠ¡å¤„ç†
- [ ] æ·»åŠ å¯è§†åŒ–ä»»åŠ¡ç¼–æ’å™¨
- [ ] é›†æˆæ›´å¤šå¤–éƒ¨æœåŠ¡

## ğŸ“ æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. è¿è¡Œæµ‹è¯•è„šæœ¬è¿›è¡Œè¯Šæ–­
3. æŸ¥çœ‹ç›¸å…³æ—¥å¿—æ–‡ä»¶
4. æäº¤Issueåˆ°é¡¹ç›®ä»“åº“

---

**æœ€åæ›´æ–°**: 2025å¹´6æœˆ11æ—¥  
**ç‰ˆæœ¬**: 1.0.0  
**ç»´æŠ¤è€…**: AI Assistant Team