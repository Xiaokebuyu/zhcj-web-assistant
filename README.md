# ğŸ¤– AI æ‚¬æµ®æ¡†åŠ©æ‰‹

> ä¸€ä¸ªç°ä»£åŒ–çš„å¯åµŒå…¥å¼ AI èŠå¤©åŠ©æ‰‹ï¼Œé‡‡ç”¨ Anthropic é£æ ¼è®¾è®¡ï¼Œæ”¯æŒå®Œæ•´çš„è¯­éŸ³äº¤äº’åŠŸèƒ½

[![Next.js](https://img.shields.io/badge/Next.js-15.3.3-000000?style=flat-square&logo=next.js)](https://nextjs.org/)
[![React](https://img.shields.io/badge/React-19.0.0-61DAFB?style=flat-square&logo=react)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-3178C6?style=flat-square&logo=typescript)](https://www.typescriptlang.org/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind%20CSS-4.x-06B6D4?style=flat-square&logo=tailwindcss)](https://tailwindcss.com/)
[![DeepSeek](https://img.shields.io/badge/DeepSeek-AI-FF6B6B?style=flat-square)](https://www.deepseek.com/)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **ğŸ¤– æ™ºèƒ½å¯¹è¯** - åŸºäº DeepSeek AI çš„å¼ºå¤§å¯¹è¯èƒ½åŠ›ï¼Œæ”¯æŒæ·±åº¦æ¨ç†
- **ğŸ™ï¸ è¯­éŸ³äº¤äº’** - å®Œæ•´çš„è¯­éŸ³è¾“å…¥è¯†åˆ«ä¸è¯­éŸ³è¾“å‡ºåŠŸèƒ½
- **ğŸ¨ ç°ä»£åŒ–è®¾è®¡** - é‡‡ç”¨ Anthropic é£æ ¼çš„ç®€æ´ç¾è§‚ç•Œé¢
- **ğŸ“± å“åº”å¼è®¾è®¡** - å®Œç¾é€‚é…æ¡Œé¢ç«¯ã€å¹³æ¿å’Œç§»åŠ¨ç«¯è®¾å¤‡
- **âš¡ è½»æ¾é›†æˆ** - ä¸€è¡Œä»£ç å³å¯é›†æˆåˆ°ä»»ä½•ç½‘ç«™

### ğŸ”§ æŠ€æœ¯ç‰¹è‰²
- **ğŸš€ é«˜æ€§èƒ½** - åŸºäº Next.js 15 å’Œ React 19 æ„å»º
- **ğŸ¯ ç±»å‹å®‰å…¨** - å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- **ğŸ”’ å®‰å…¨å¯é ** - é‡‡ç”¨ç°ä»£å®‰å…¨æ¶æ„å’Œæœ€ä½³å®è·µ
- **ğŸŒ è·¨åŸŸæ”¯æŒ** - å®Œå–„çš„ CORS é…ç½®å’Œ iframe å®‰å…¨ç­–ç•¥
- **ğŸ“¦ è½»é‡çº§** - ä¼˜åŒ–çš„æ‰“åŒ…ä½“ç§¯ï¼Œå¿«é€ŸåŠ è½½

### ğŸ¤ è¯­éŸ³åŠŸèƒ½è¯¦æƒ…
- **è¯­éŸ³è¯†åˆ« (STT)** - åŸºäº Web Speech API çš„å®æ—¶è¯­éŸ³è½¬æ–‡å­—
- **è¯­éŸ³åˆæˆ (TTS)** - åŸºäº Edge-TTS çš„é«˜è´¨é‡ä¸­æ–‡è¯­éŸ³ç”Ÿæˆ
- **å¤šè¯­éŸ³é€‰æ‹©** - æ”¯æŒ 6 ç§ä¸åŒé£æ ¼çš„ä¸­æ–‡è¯­éŸ³
- **è¯­éŸ³æ§åˆ¶** - æ”¯æŒè¯­éŸ³å‚æ•°è°ƒèŠ‚ï¼ˆè¯­é€Ÿã€éŸ³è°ƒã€éŸ³é‡ï¼‰
- **å®æ—¶äº¤äº’** - æµå¼è¯­éŸ³è¯†åˆ«ï¼Œè¾¹è¯´è¾¹æ˜¾ç¤º

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js** >= 18.0.0
- **npm** >= 8.0.0 æˆ– **yarn** >= 1.22.0
- **Python** >= 3.8 (ç”¨äºè¯­éŸ³åˆæˆåŠŸèƒ½)

### 1. å…‹éš†å’Œå®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/Xiaokebuyu/zhcj-web-assistant.git
cd ai-assistant

# å®‰è£…ä¾èµ–
npm install

# å®‰è£…è¯­éŸ³åˆæˆä¾èµ–
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install edge-tts
```

### 2. ç¯å¢ƒé…ç½®

åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```env
# å¿…å¡«ï¼šDeepSeek API å¯†é’¥
DEEPSEEK_API_KEY=your_deepseek_api_key_here

# å¯é€‰ï¼šåº”ç”¨åŸºç¡€URLï¼ˆéƒ¨ç½²æ—¶ä¿®æ”¹ï¼‰
NEXT_PUBLIC_APP_URL=http://localhost:3000

# å¯é€‰ï¼šå¼€å‘æ¨¡å¼é…ç½®
NODE_ENV=development
```

### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (ä½¿ç”¨ Turbopack åŠ é€Ÿ)
npm run dev

```

è®¿é—® `http://localhost:3000` æŸ¥çœ‹é¡¹ç›®ä¸»é¡µã€‚

## ğŸ¯ é›†æˆæŒ‡å—

### æ–¹æ³•ä¸€ï¼šå¿«é€Ÿé›†æˆ (æ¨è)

åœ¨æ‚¨çš„ç½‘ç«™ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```html
<!-- åŠ è½½ AI åŠ©æ‰‹ SDK -->
<script src="http://localhost:3000/embed.js"></script>

<!-- åˆå§‹åŒ–åŠ©æ‰‹ -->
<script>
  window.initAIAssistant({
    config: {
      position: 'bottom-right',
      theme: 'light',
      enableVoice: true
    }
  });
</script>
```

### æ–¹æ³•äºŒï¼šé«˜çº§é›†æˆ

```html
<script src="http://localhost:3000/embed.js"></script>
<script>
  const assistant = new AIAssistant({
    config: {
      baseUrl: 'http://localhost:3000',
      position: 'bottom-left',
      theme: 'dark',
      enableVoice: true,
      maxMessages: 100
    },
    onReady: () => {
      console.log('ğŸ‰ AI åŠ©æ‰‹å·²å°±ç»ªï¼');
    },
    onError: (error) => {
      console.error('âŒ AI åŠ©æ‰‹é”™è¯¯:', error);
    }
  });
  
  assistant.init();
  
  // é«˜çº§APIä½¿ç”¨
  assistant.show();    // æ˜¾ç¤ºåŠ©æ‰‹
  assistant.hide();    // éšè—åŠ©æ‰‹
  assistant.destroy(); // é”€æ¯åŠ©æ‰‹
</script>
```

## âš™ï¸ é…ç½®é€‰é¡¹

### åŸºç¡€é…ç½®

| é€‰é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| `baseUrl` | `string` | `'http://localhost:3000'` | API æœåŠ¡å™¨åœ°å€ |
| `position` | `string` | `'bottom-right'` | æ‚¬æµ®ä½ç½® |
| `theme` | `string` | `'light'` | ç•Œé¢ä¸»é¢˜ |
| `enableVoice` | `boolean` | `true` | æ˜¯å¦å¯ç”¨è¯­éŸ³åŠŸèƒ½ |
| `maxMessages` | `number` | `50` | æœ€å¤§æ¶ˆæ¯å†å²æ•°é‡ |

### ä½ç½®é€‰é¡¹ (position)

```javascript
'bottom-right'  // å³ä¸‹è§’ (é»˜è®¤)
'bottom-left'   // å·¦ä¸‹è§’
'top-right'     // å³ä¸Šè§’
'top-left'      // å·¦ä¸Šè§’
```

### ä¸»é¢˜é€‰é¡¹ (theme)

```javascript
'light'  // æµ…è‰²ä¸»é¢˜ (é»˜è®¤)
'dark'   // æ·±è‰²ä¸»é¢˜
'auto'   // è·Ÿéšç³»ç»Ÿä¸»é¢˜
```

### è¯­éŸ³é…ç½®ç¤ºä¾‹

```javascript
// å®Œæ•´è¯­éŸ³é…ç½®
const assistant = new AIAssistant({
  config: {
    enableVoice: true,
    voiceSettings: {
      voice: 'xiaoxiao',      // è¯­éŸ³ç±»å‹
      rate: '0%',             // è¯­é€Ÿè°ƒèŠ‚ (-50% ~ +100%)
      pitch: '0%',            // éŸ³è°ƒè°ƒèŠ‚ (-50% ~ +50%)
      volume: '0%',           // éŸ³é‡è°ƒèŠ‚ (-50% ~ +50%)
      autoPlay: true          // è‡ªåŠ¨æ’­æ”¾å›å¤è¯­éŸ³
    }
  }
});
```

### æ”¯æŒçš„è¯­éŸ³ç±»å‹

| ID | åç§° | æè¿° |
|----|------|------|
| `xiaoxiao` | æ™“æ™“ | æ¸©æŸ”å¥³å£° (é»˜è®¤) |
| `xiaoyi` | æ™“ä¼Š | æ´»æ³¼å¥³å£° |
| `yunjian` | äº‘å¥ | æˆç†Ÿç”·å£° |
| `yunxi` | äº‘å¸Œ | å¹´è½»ç”·å£° |
| `xiaomo` | æ™“å¢¨ | ç”œç¾å¥³å£° |
| `xiaoxuan` | æ™“è± | çŸ¥æ€§å¥³å£° |

## ğŸ“¡ API æ¥å£æ–‡æ¡£

### èŠå¤©æ¥å£

**è¯·æ±‚:**

```http
POST /api/chat
Content-Type: application/json

{
  "messages": [
    {
      "role": "user",
      "content": "ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±"
    }
  ],
  "model": "deepseek-reasoner",
  "temperature": 0.7,
  "max_tokens": 1000
}
```

**å“åº”:**

```json
{
  "message": "ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„ AI åŠ©æ‰‹ï¼ŒåŸºäºå…ˆè¿›çš„ DeepSeek æ¨¡å‹...",
  "messageId": "msg_1234567890",
  "usage": {
    "prompt_tokens": 15,
    "completion_tokens": 45,
    "total_tokens": 60
  }
}
```

### è¯­éŸ³åˆæˆæ¥å£

**è¯·æ±‚:**

```http
POST /api/tts
Content-Type: application/json

{
  "text": "ä½ å¥½ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•è¯­éŸ³",
  "voice": "xiaoxiao",
  "rate": "+10%",
  "pitch": "0%",
  "volume": "0%"
}
```

**å“åº”:**

```
Content-Type: audio/mpeg
Content-Length: [audio_file_size]

[éŸ³é¢‘æ–‡ä»¶äºŒè¿›åˆ¶æ•°æ®]
```

### è·å–è¯­éŸ³åˆ—è¡¨

```http
GET /api/tts

{
  "voices": [
    {
      "id": "xiaoxiao",
      "name": "zh-CN-XiaoxiaoNeural",
      "displayName": "æ™“æ™“ï¼ˆæ¸©æŸ”å¥³å£°ï¼‰"
    }
  ]
}
```

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
ai-assistant/
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“ app/                     # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ ğŸ“ api/                 # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ chat/           # èŠå¤©API
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts       # èŠå¤©å¤„ç†é€»è¾‘
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ tts/            # è¯­éŸ³åˆæˆAPI
â”‚   â”‚   â”‚       â””â”€â”€ route.ts       # TTSå¤„ç†é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ ğŸ“ embed/              # åµŒå…¥é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx           # iframeåµŒå…¥é¡µé¢
â”‚   â”‚   â”œâ”€â”€ page.tsx               # ä¸»é¡µ
â”‚   â”‚   â”œâ”€â”€ layout.tsx             # æ ¹å¸ƒå±€
â”‚   â”‚   â””â”€â”€ globals.css            # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ ğŸ“ components/             # React ç»„ä»¶
â”‚   â”‚   â””â”€â”€ FloatingAssistant.tsx  # æ‚¬æµ®åŠ©æ‰‹ä¸»ç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“ types/                  # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts               # æ‰€æœ‰ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ ğŸ“ utils/                  # å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ streamingSpeechRecognition.ts  # è¯­éŸ³è¯†åˆ«å·¥å…·
â”œâ”€â”€ ğŸ“ public/                     # é™æ€èµ„æº
â”‚   â”œâ”€â”€ embed.js                   # JavaScript SDK
â”‚   â””â”€â”€ example.html               # é›†æˆç¤ºä¾‹é¡µé¢
â”œâ”€â”€ ğŸ“ temp/                       # ä¸´æ—¶æ–‡ä»¶ (è¿è¡Œæ—¶åˆ›å»º)
â”œâ”€â”€ ğŸ“ venv/                       # Pythonè™šæ‹Ÿç¯å¢ƒ
â”œâ”€â”€ package.json                   # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json                  # TypeScript é…ç½®
â”œâ”€â”€ tailwind.config.ts             # Tailwind é…ç½®
â””â”€â”€ next.config.js                 # Next.js é…ç½®
```

## ğŸ¨ è‡ªå®šä¹‰å¼€å‘

### ä¿®æ”¹æ ·å¼ä¸»é¢˜

```typescript
// src/components/FloatingAssistant.tsx
const customTheme = {
  primary: 'bg-purple-500 hover:bg-purple-600',
  secondary: 'bg-purple-100 text-purple-700',
  background: 'bg-white',
  border: 'border-purple-200',
  text: 'text-gray-900',
  // æ›´å¤šè‡ªå®šä¹‰æ ·å¼...
};
```

### æ‰©å±•è¯­éŸ³åŠŸèƒ½

```typescript
// æ·»åŠ æ–°çš„è¯­éŸ³ç±»å‹
const CUSTOM_VOICES = {
  'custom_voice': 'zh-CN-YourCustomVoice',
  ...CHINESE_VOICES
};

// è‡ªå®šä¹‰è¯­éŸ³å‚æ•°
const voiceConfig = {
  voice: 'custom_voice',
  rate: '+20%',
  pitch: '+5%',
  volume: '-10%'
};
```

### è‡ªå®šä¹‰æ¶ˆæ¯å¤„ç†

```typescript
// æ‰©å±•æ¶ˆæ¯ç±»å‹
interface CustomMessage extends ChatMessage {
  customType?: 'image' | 'file' | 'link';
  metadata?: Record<string, any>;
}

// è‡ªå®šä¹‰æ¶ˆæ¯æ¸²æŸ“
const renderCustomMessage = (message: CustomMessage) => {
  // è‡ªå®šä¹‰æ¸²æŸ“é€»è¾‘
};
```

## ğŸŒ éƒ¨ç½²æŒ‡å—

### å¼€å‘ç¯å¢ƒéƒ¨ç½²

```bash
# æ„å»ºé¡¹ç›®
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start
```

### ç”Ÿäº§ç¯å¢ƒé…ç½®

1. **æ›´æ–°ç¯å¢ƒå˜é‡**

```env
DEEPSEEK_API_KEY=your_production_api_key
NEXT_PUBLIC_APP_URL=https://your-domain.com
NODE_ENV=production
```

2. **æœåŠ¡å™¨é…ç½®**

```nginx
# Nginx é…ç½®ç¤ºä¾‹
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        
        # å…è®¸å¤§æ–‡ä»¶ä¸Šä¼  (è¯­éŸ³æ–‡ä»¶)
        client_max_body_size 10M;
    }
    
    # é™æ€æ–‡ä»¶ç¼“å­˜
    location /embed.js {
        proxy_pass http://localhost:3000;
        expires 1h;
        add_header Cache-Control "public, immutable";
    }
}


## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. è¯­éŸ³åŠŸèƒ½ä¸å·¥ä½œ**

```bash
# æ£€æŸ¥ Python ç¯å¢ƒ
python --version

# é‡æ–°å®‰è£… edge-tts
pip install --upgrade edge-tts

# æ£€æŸ¥æƒé™
chmod +x venv/bin/edge-tts
```

**2. API è¿æ¥å¤±è´¥**

```javascript
// æ£€æŸ¥ API å¯†é’¥é…ç½®
console.log(process.env.DEEPSEEK_API_KEY ? 'âœ… APIå¯†é’¥å·²é…ç½®' : 'âŒ APIå¯†é’¥æœªé…ç½®');

// æµ‹è¯• API è¿æ¥
fetch('/api/chat', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    messages: [{ role: 'user', content: 'test' }]
  })
}).then(res => console.log('APIçŠ¶æ€:', res.status));
```

**3. åµŒå…¥é›†æˆé—®é¢˜**

```html
<!-- æ£€æŸ¥è·¨åŸŸé…ç½® -->
<script>
console.log('iframeåŠ è½½çŠ¶æ€:', document.querySelector('iframe').contentWindow);
</script>

<!-- æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯ -->
```

### è°ƒè¯•æ¨¡å¼

```javascript
// å¯ç”¨è¯¦ç»†æ—¥å¿—
const assistant = new AIAssistant({
  config: { debug: true },
  onError: (error) => {
    console.error('è¯¦ç»†é”™è¯¯ä¿¡æ¯:', error);
  }
});
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–

- âœ… ä½¿ç”¨ Next.js è‡ªåŠ¨ä»£ç åˆ†å‰²
- âœ… å›¾ç‰‡å’Œèµ„æºè‡ªåŠ¨ä¼˜åŒ–
- âœ… è¯­éŸ³æ–‡ä»¶æœ¬åœ°ç¼“å­˜
- âœ… API è¯·æ±‚é˜²æŠ–å¤„ç†

### åç«¯ä¼˜åŒ–

- âœ… API å“åº”ç¼“å­˜
- âœ… è¯­éŸ³æ–‡ä»¶ä¸´æ—¶å­˜å‚¨æ¸…ç†
- âœ… è¯·æ±‚é¢‘ç‡é™åˆ¶
- âœ… é”™è¯¯é‡è¯•æœºåˆ¶




## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) è®¸å¯è¯ã€‚

## ğŸ™ è‡´è°¢

- [DeepSeek](https://www.deepseek.com/) - æä¾›å¼ºå¤§çš„AIå¯¹è¯èƒ½åŠ›
- [Edge-TTS](https://github.com/rany2/edge-tts) - é«˜è´¨é‡çš„è¯­éŸ³åˆæˆ
- [Next.js](https://nextjs.org/) - ä¼˜ç§€çš„Reactæ¡†æ¶
- [Tailwind CSS](https://tailwindcss.com/) - å®ç”¨çš„CSSæ¡†æ¶


---

<div align="center">

**[ğŸ  é¦–é¡µ](http://localhost:3000)** â€¢ **[ğŸ“– åœ¨çº¿æ–‡æ¡£](#)** â€¢ **[ğŸš€ æ¼”ç¤ºé¢„è§ˆ](http://localhost:3000/embed)** â€¢ **[ğŸ“¦ ä¸‹è½½æœ€æ–°ç‰ˆ](#)**

Made with â¤ï¸ by AI Assistant Team

</div>
